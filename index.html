<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gym Social Feed</title>
<style>
body{font-family:Arial,sans-serif;background:#f0f2f5;margin:0;}
header{background:#1877f2;color:#fff;padding:15px;text-align:center;font-size:24px;}
.container{max-width:600px;margin:20px auto;padding:0 10px;}
.post-form{background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.2);margin-bottom:15px;}
.post-form textarea{width:100%;padding:10px;border-radius:5px;border:1px solid #ccc;resize:none;}
.post-form button{margin-top:10px;padding:8px 15px;background:#1877f2;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:0.3s;}
.post-form button:hover{background:#155bb5;}
.feed{list-style:none;padding:0;}
.post{background:#fff;margin-bottom:15px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);padding:10px;opacity:0;transform:translateY(20px);transition:0.5s;}
.post.visible{opacity:1;transform:translateY(0);}
.post-header{display:flex;justify-content:space-between;align-items:center;}
.post-header h4{margin:0;color:#1877f2;}
.post-header button{background:#e05555;color:#fff;border:none;padding:3px 7px;border-radius:4px;cursor:pointer;display:none;}
.post.admin .post-header button{display:block;}
.post-content{margin:10px 0;}
.post-actions{display:flex;gap:15px;font-size:14px;color:#555;}
.post-actions button{background:none;border:none;cursor:pointer;}
.comments{margin-top:10px;padding-left:10px;}
.comment{background:#f0f2f5;padding:5px 8px;border-radius:5px;margin-bottom:5px;position:relative;}
.comment h5{margin:0;font-size:13px;color:#1877f2;}
.comment p{margin:2px 0;font-size:13px;}
.comment .delete-btn{position:absolute;top:5px;right:5px;background:#e05555;color:#fff;border:none;padding:2px 5px;border-radius:5px;cursor:pointer;display:none;}
.comment.admin .delete-btn{display:block;}
.comment-input{display:flex;gap:5px;margin-top:5px;}
.comment-input input{flex:1;padding:5px;border-radius:5px;border:1px solid #ccc;}
.comment-input button{padding:5px 10px;background:#1877f2;color:#fff;border:none;border-radius:5px;cursor:pointer;}
.comment-input button:hover{background:#155bb5;}
.like-count{margin-left:5px;}
</style>
</head>
<body>

<header>Gym Social Feed</header>

<div class="container">

<!-- Form ƒëƒÉng b√†i -->
<div class="post-form">
<textarea id="postContent" rows="3" placeholder="Vi·∫øt b√†i t·∫≠p, m·∫πo gym ho·∫∑c chia s·∫ª kinh nghi·ªám..."></textarea>
<input type="text" id="username" placeholder="T√™n c·ªßa b·∫°n (ho·∫∑c Admin)">
<button id="postBtn">ƒêƒÉng b√†i</button>
</div>

<!-- Feed -->
<ul class="feed" id="feedList"></ul>

</div>

<script>
// ===== Data l∆∞u localStorage =====
let feed = JSON.parse(localStorage.getItem('gymFeed')) || [];

// ===== Render feed =====
function renderFeed(){
  const feedList = document.getElementById('feedList');
  feedList.innerHTML = '';
  feed.forEach((post, index)=>{
    const postEl = document.createElement('li');
    postEl.classList.add('post');
    if(post.username.toLowerCase()==='admin') postEl.classList.add('admin');
    setTimeout(()=>postEl.classList.add('visible'),50);
    postEl.innerHTML = `
      <div class="post-header">
        <h4>${post.username}</h4>
        ${post.username.toLowerCase()==='admin'? `<button onclick="deletePost(${index})">X√≥a</button>`: ''}
      </div>
      <div class="post-content">${post.content}</div>
      <div class="post-actions">
        <button onclick="toggleLike(${index})">${post.likes.includes('user')?'‚ù§Ô∏è':'ü§ç'} Th√≠ch</button><span class="like-count">${post.likes.length}</span>
      </div>
      <div class="comments">
        ${post.comments.map((c,i)=>`
          <div class="comment ${c.username.toLowerCase()==='admin'?'admin':''}">
            <h5>${c.username}</h5>
            <p>${c.content}</p>
            ${c.username.toLowerCase()==='admin'? `<button class="delete-btn" onclick="deleteComment(${index},${i})">X√≥a</button>`: ''}
          </div>
        `).join('')}
        <div class="comment-input">
          <input type="text" placeholder="B√¨nh lu·∫≠n..." onkeypress="addComment(event,${index})">
          <button onclick="addCommentBtn(${index})">G·ª≠i</button>
        </div>
      </div>
    `;
    feedList.appendChild(postEl);
  });
}

// ===== Th√™m b√†i vi·∫øt =====
document.getElementById('postBtn').addEventListener('click', ()=>{
  const content = document.getElementById('postContent').value.trim();
  const username = document.getElementById('username').value.trim() || 'Ng∆∞·ªùi d√πng';
  if(!content) return alert('Vui l√≤ng nh·∫≠p n·ªôi dung!');
  feed.unshift({username, content, likes:[], comments:[], time:Date.now()});
  localStorage.setItem('gymFeed', JSON.stringify(feed));
  document.getElementById('postContent').value='';
  renderFeed();
});

// ===== Delete post (admin) =====
function deletePost(index){
  if(confirm('X√°c nh·∫≠n x√≥a b√†i?')){
    feed.splice(index,1);
    localStorage.setItem('gymFeed', JSON.stringify(feed));
    renderFeed();
  }
}

// ===== Like/Dislike =====
function toggleLike(index){
  let post = feed[index];
  if(post.likes.includes('user')) post.likes = post.likes.filter(u=>'user'!==u);
  else post.likes.push('user');
  localStorage.setItem('gymFeed', JSON.stringify(feed));
  renderFeed();
}

// ===== Th√™m b√¨nh lu·∫≠n =====
function addComment(e, postIndex){
  if(e.key==='Enter'){
    const input = e.target;
    const commentText = input.value.trim();
    const username = prompt('T√™n c·ªßa b·∫°n:','Ng∆∞·ªùi d√πng');
    if(commentText && username){
      feed[postIndex].comments.push({username, content: commentText});
      localStorage.setItem('gymFeed', JSON.stringify(feed));
      input.value='';
      renderFeed();
    }
  }
}
function addCommentBtn(postIndex){
  const input = document.querySelectorAll('.post')[postIndex].querySelector('.comment-input input');
  const commentText = input.value.trim();
  const username = prompt('T√™n c·ªßa b·∫°n:','Ng∆∞·ªùi d√πng');
  if(commentText && username){
    feed[postIndex].comments.push({username, content: commentText});
    localStorage.setItem('gymFeed', JSON.stringify(feed));
    input.value='';
    renderFeed();
  }
}

// ===== Delete comment (admin) =====
function deleteComment(postIndex, commentIndex){
  if(confirm('X√°c nh·∫≠n x√≥a b√¨nh lu·∫≠n?')){
    feed[postIndex].comments.splice(commentIndex,1);
    localStorage.setItem('gymFeed', JSON.stringify(feed));
    renderFeed();
  }
}

// ===== L·∫ßn ƒë·∫ßu render =====
renderFeed();
</script>

</body>
</html>
