<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>T·ªïng T√†i Group</title>
<style>
/* ===== RESET & BODY ===== */
body{font-family:Arial,sans-serif;background:#fff3e0;margin:0;}
header{background:#c62828;color:#fff;padding:15px;text-align:center;font-size:28px;font-weight:bold;position:sticky;top:0;z-index:100;box-shadow:0 3px 8px rgba(0,0,0,0.2);}
.container{max-width:700px;margin:20px auto;padding:0 10px;}
.post-form{background:#fff;padding:15px;border-radius:12px;box-shadow:0 3px 8px rgba(0,0,0,0.15);margin-bottom:20px;}
.post-form textarea,input[type=text]{width:100%;padding:10px;margin-bottom:10px;border-radius:5px;border:1px solid #ccc;resize:none;}
.post-form input[type=file]{margin-bottom:10px;}
.post-form button{padding:10px 15px;background:#d32f2f;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:0.3s;font-weight:bold;}
.post-form button:hover{background:#b71c1c;}
.feed{list-style:none;padding:0;}
.post{background:#fff;margin-bottom:20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.15);padding:12px;opacity:0;transform:translateY(20px);transition:0.5s;}
.post.visible{opacity:1;transform:translateY(0);}
.post-header{display:flex;justify-content:space-between;align-items:center;}
.post-header h4{margin:0;color:#d32f2f;font-weight:bold;}
.post-header small{color:#555;font-size:12px;}
.post-header button{background:#e05555;color:#fff;border:none;padding:3px 7px;border-radius:4px;cursor:pointer;display:none;}
.post.admin .post-header button{display:block;}
.post-content{margin:10px 0;}
.post-content img{max-width:100%;border-radius:8px;margin-top:10px;}
.post-actions{display:flex;gap:15px;font-size:14px;color:#555;margin-bottom:5px;}
.post-actions button{background:none;border:none;cursor:pointer;font-size:14px;}
.like-count{margin-left:5px;}
.comments{margin-top:10px;padding-left:10px;}
.comment{background:#fff8e1;padding:5px 8px;border-radius:8px;margin-bottom:5px;position:relative;box-shadow:0 1px 4px rgba(0,0,0,0.1);}
.comment h5{margin:0;font-size:13px;color:#d32f2f;font-weight:bold;}
.comment p{margin:2px 0;font-size:13px;}
.comment .delete-btn{position:absolute;top:5px;right:5px;background:#e05555;color:#fff;border:none;padding:2px 5px;border-radius:5px;cursor:pointer;display:none;}
.comment.admin .delete-btn{display:block;}
.comment-input{display:flex;gap:5px;margin-top:5px;}
.comment-input input{flex:1;padding:5px;border-radius:5px;border:1px solid #ccc;}
.comment-input button{padding:5px 10px;background:#d32f2f;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:bold;}
.comment-input button:hover{background:#b71c1c;}

/* T·∫øt theme background */
body::before{
  content:"";
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:url('https://cdn.pixabay.com/photo/2017/01/20/00/30/fireworks-1994828_1280.jpg') center/cover no-repeat;
  opacity:0.1;z-index:-1;
}
</style>
</head>
<body>

<header>T·ªïng T√†i Group</header>

<div class="container">

<!-- Form ƒëƒÉng b√†i -->
<div class="post-form">
<textarea id="postContent" rows="3" placeholder="Vi·∫øt b√†i t·∫≠p, m·∫πo gym, chia s·∫ª k√®m ·∫£nh..."></textarea>
<input type="text" id="username" placeholder="T√™n c·ªßa b·∫°n (ho·∫∑c Admin)">
<input type="file" id="postImage" accept="image/*">
<button id="postBtn">ƒêƒÉng b√†i</button>
</div>

<!-- Feed -->
<ul class="feed" id="feedList"></ul>

</div>

<script>
// ===== L∆∞u data =====
let feed = JSON.parse(localStorage.getItem('TTGFeed')) || [];

// ===== Render feed =====
function renderFeed(){
  const feedList = document.getElementById('feedList');
  feedList.innerHTML = '';
  feed.forEach((post,index)=>{
    const postEl = document.createElement('li');
    postEl.classList.add('post');
    if(post.username.toLowerCase()==='admin') postEl.classList.add('admin');
    setTimeout(()=>postEl.classList.add('visible'),50);
    let timeStr = new Date(post.time).toLocaleString('vi-VN',{hour12:false});
    postEl.innerHTML = `
      <div class="post-header">
        <h4>${post.username}</h4>
        <small>${timeStr}</small>
        ${post.username.toLowerCase()==='admin'? `<button onclick="deletePost(${index})">X√≥a</button>`: ''}
      </div>
      <div class="post-content">
        ${post.content.replace(/\n/g,'<br>')}
        ${post.image?`<img src="${post.image}" />`:''}
      </div>
      <div class="post-actions">
        <button onclick="toggleLike(${index})">${post.likes.includes('user')?'‚ù§Ô∏è':'ü§ç'} Th√≠ch</button>
        <span class="like-count">${post.likes.length}</span>
      </div>
      <div class="comments">
        ${post.comments.map((c,i)=>`
          <div class="comment ${c.username.toLowerCase()==='admin'?'admin':''}">
            <h5>${c.username}</h5>
            <p>${c.content}</p>
            ${c.username.toLowerCase()==='admin'? `<button class="delete-btn" onclick="deleteComment(${index},${i})">X√≥a</button>`: ''}
          </div>
        `).join('')}
        <div class="comment-input">
          <input type="text" placeholder="B√¨nh lu·∫≠n..." onkeypress="addComment(event,${index})">
          <button onclick="addCommentBtn(${index})">G·ª≠i</button>
        </div>
      </div>
    `;
    feedList.appendChild(postEl);
  });
}

// ===== ƒêƒÉng b√†i =====
document.getElementById('postBtn').addEventListener('click', ()=>{
  const content = document.getElementById('postContent').value.trim();
  const username = document.getElementById('username').value.trim() || 'Ng∆∞·ªùi d√πng';
  const imageInput = document.getElementById('postImage');
  if(!content && !imageInput.files[0]) return alert('Nh·∫≠p n·ªôi dung ho·∫∑c ·∫£nh!');
  
  let reader = new FileReader();
  reader.onload = function(e){
    feed.unshift({username,content,image:e.target.result||'',likes:[],comments:[],time:Date.now()});
    localStorage.setItem('TTGFeed', JSON.stringify(feed));
    document.getElementById('postContent').value='';
    document.getElementById('username').value='';
    document.getElementById('postImage').value='';
    renderFeed();
  }
  if(imageInput.files[0]){
    reader.readAsDataURL(imageInput.files[0]);
  } else {
    reader.onload({target:{result:''}});
  }
});

// ===== X√≥a b√†i (admin) =====
function deletePost(index){
  if(confirm('X√°c nh·∫≠n x√≥a b√†i?')){
    feed.splice(index,1);
    localStorage.setItem('TTGFeed', JSON.stringify(feed));
    renderFeed();
  }
}

// ===== Like/Dislike =====
function toggleLike(index){
  let post = feed[index];
  if(post.likes.includes('user')) post.likes = post.likes.filter(u=>'user'!==u);
  else post.likes.push('user');
  localStorage.setItem('TTGFeed', JSON.stringify(feed));
  renderFeed();
}

// ===== B√¨nh lu·∫≠n =====
function addComment(e, postIndex){
  if(e.key==='Enter'){
    const input = e.target;
    const commentText = input.value.trim();
    const username = prompt('T√™n c·ªßa b·∫°n:','Ng∆∞·ªùi d√πng');
    if(commentText && username){
      feed[postIndex].comments.push({username,content:commentText});
      localStorage.setItem('TTGFeed', JSON.stringify(feed));
      input.value='';
      renderFeed();
    }
  }
}
function addCommentBtn(postIndex){
  const input = document.querySelectorAll('.post')[postIndex].querySelector('.comment-input input');
  const commentText = input.value.trim();
  const username = prompt('T√™n c·ªßa b·∫°n:','Ng∆∞·ªùi d√πng');
  if(commentText && username){
    feed[postIndex].comments.push({username,content:commentText});
    localStorage.setItem('TTGFeed', JSON.stringify(feed));
    input.value='';
    renderFeed();
  }
}

// ===== X√≥a b√¨nh lu·∫≠n (admin) =====
function deleteComment(postIndex, commentIndex){
  if(confirm('X√°c nh·∫≠n x√≥a b√¨nh lu·∫≠n?')){
    feed[postIndex].comments.splice(commentIndex,1);
    localStorage.setItem('TTGFeed', JSON.stringify(feed));
    renderFeed();
  }
}

// ===== Render l·∫ßn ƒë·∫ßu =====
renderFeed();
</script>

</body>
</html>
