<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ƒêua Xe C√πng C·∫≠u V√†ng</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#111;
  overflow:hidden;
  font-family:Arial;
  touch-action:none;
}

#game{
  position:relative;
  width:360px;
  height:100vh;
  margin:auto;
  background:#555;
  border-left:6px solid #fff;
  border-right:6px solid #fff;
}

/* V·∫†CH ƒê∆Ø·ªúNG */
.line{
  position:absolute;
  width:8px;
  height:40px;
  background:#fff;
  left:176px;
  animation: road 1s linear infinite;
}

@keyframes road{
  from{top:-40px}
  to{top:100%}
}

/* XE C·∫¨U V√ÄNG */
#bike{
  position:absolute;
  bottom:20px;
  left:140px;
  width:80px;
  height:80px;
  background:gold;
  border-radius:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
}

/* CH∆Ø·ªöNG NG·∫†I */
.obstacle{
  position:absolute;
  width:50px;
  height:50px;
  background:#222;
  border-radius:10px;
  top:-60px;
}

/* HUD */
#score{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  color:#fff;
  font-size:20px;
}

#over{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  font-size:26px;
}
button{
  margin-top:15px;
  padding:10px 20px;
  font-size:18px;
}
</style>
</head>

<body>

<div id="score">ƒêi·ªÉm: 0</div>

<div id="game">
  <div id="bike">üêï</div>
</div>

<div id="over">
  üí• C·∫≠u V√†ng b·ªã ng√£!  
  <button onclick="location.reload()">Ch∆°i l·∫°i</button>
</div>

<script>
const game=document.getElementById("game");
const bike=document.getElementById("bike");
const over=document.getElementById("over");
const scoreEl=document.getElementById("score");

let bikeX=140;
let score=0;
let speed=4;
let playing=true;

/* DI CHUY·ªÇN */
function move(x){
  bikeX+=x;
  bikeX=Math.max(0,Math.min(280,bikeX));
  bike.style.left=bikeX+"px";
}

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") move(-30);
  if(e.key==="ArrowRight") move(30);
});

document.addEventListener("touchstart",e=>{
  const x=e.touches[0].clientX;
  if(x<window.innerWidth/2) move(-30);
  else move(30);
});

/* V·∫†CH ƒê∆Ø·ªúNG */
setInterval(()=>{
  if(!playing) return;
  const l=document.createElement("div");
  l.className="line";
  game.appendChild(l);
  setTimeout(()=>l.remove(),1000);
},300);

/* CH∆Ø·ªöNG NG·∫†I */
function spawn(){
  if(!playing) return;
  const o=document.createElement("div");
  o.className="obstacle";
  o.style.left=Math.random()*280+"px";
  game.appendChild(o);

  let y=-60;
  const fall=setInterval(()=>{
    if(!playing) return;
    y+=speed;
    o.style.top=y+"px";

    const a=bike.getBoundingClientRect();
    const b=o.getBoundingClientRect();
    if(!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom)){
      playing=false;
      over.style.display="flex";
    }

    if(y>window.innerHeight){
      clearInterval(fall);
      o.remove();
      score++;
      scoreEl.innerText="ƒêi·ªÉm: "+score;
      if(score%5===0) speed++;
    }
  },20);
}

setInterval(spawn,1200);
</script>

</body>
</html>