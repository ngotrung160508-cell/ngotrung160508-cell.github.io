<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đừng Để Cậu Vàng Bị Bắt</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#111;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  user-select:none;
}
canvas{
  background:linear-gradient(#87ceeb,#fef3c7);
  border:5px solid #7c2d12;
}
</style>
</head>

<body>
<canvas id="game" width="1400" height="500"></canvas>

<script>
/* =========================
   KHỞI TẠO
========================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const W = canvas.width;
const H = canvas.height;

const GROUND_Y = 380;
const GRAVITY = 0.9;

/* =========================
   CAMERA
========================= */
let cameraX = 0;

/* =========================
   INPUT
========================= */
let jumpPressed = false;

document.addEventListener("keydown", e => {
  if(e.code === "Space") jumpPressed = true;
});
document.addEventListener("keyup", e => {
  if(e.code === "Space") jumpPressed = false;
});
canvas.addEventListener("click", () => jumpPressed = true);

/* =========================
   CẬU VÀNG
========================= */
const dog = {
  x: 200,
  y: GROUND_Y,
  w: 90,
  h: 60,
  vy: 0,
  onGround: true,
  runTime: 0
};

/* =========================
   VẬT LÝ NHẢY
========================= */
function updateDogPhysics(){
  if(jumpPressed && dog.onGround){
    dog.vy = -18;
    dog.onGround = false;
  }

  dog.vy += GRAVITY;
  dog.y += dog.vy;

  if(dog.y >= GROUND_Y){
    dog.y = GROUND_Y;
    dog.vy = 0;
    dog.onGround = true;
  }

  dog.runTime += 0.15;
}

/* =========================
   VẼ CẬU VÀNG (HOẠT HÌNH)
========================= */
function drawDog(){
  ctx.save();
  ctx.translate(dog.x - cameraX, dog.y);

  const run = Math.sin(dog.runTime);

  // thân
  ctx.fillStyle = "#fbbf24";
  ctx.beginPath();
  ctx.ellipse(0, 0, 45, 28, 0, 0, Math.PI * 2);
  ctx.fill();

  // đầu
  ctx.beginPath();
  ctx.ellipse(55, -18, 22, 20, 0, 0, Math.PI * 2);
  ctx.fill();

  // tai
  ctx.fillStyle = "#f59e0b";
  ctx.beginPath();
  ctx.moveTo(48, -45);
  ctx.lineTo(35, -20);
  ctx.lineTo(55, -25);
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(62, -45);
  ctx.lineTo(55, -25);
  ctx.lineTo(75, -20);
  ctx.fill();

  // mắt
  ctx.fillStyle = "#000";
  ctx.beginPath();
  ctx.arc(60, -20, 3, 0, Math.PI * 2);
  ctx.fill();

  // chân trước
  ctx.strokeStyle = "#92400e";
  ctx.lineWidth = 5;
  ctx.beginPath();
  ctx.moveTo(15, 20);
  ctx.lineTo(15, 20 + run * 10);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(35, 20);
  ctx.lineTo(35, 20 - run * 10);
  ctx.stroke();

  // chân sau
  ctx.beginPath();
  ctx.moveTo(-15, 20);
  ctx.lineTo(-15, 20 - run * 10);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(-35, 20);
  ctx.lineTo(-35, 20 + run * 10);
  ctx.stroke();

  // đuôi
  ctx.strokeStyle = "#f59e0b";
  ctx.lineWidth = 6;
  ctx.beginPath();
  ctx.moveTo(-45, -10);
  ctx.quadraticCurveTo(-65, -25 + run * 5, -55, -45);
  ctx.stroke();

  ctx.restore();
}

/* =========================
   NỀN + MẶT ĐẤT
========================= */
function drawBackground(){
  // mặt đất
  ctx.fillStyle = "#facc15";
  ctx.fillRect(0, GROUND_Y + 30, W, H);

  // đường làng
  ctx.fillStyle = "#d97706";
  ctx.fillRect(0, GROUND_Y + 30, W, 8);
}

/* =========================
   CAMERA UPDATE
========================= */
function updateCamera(){
  cameraX = dog.x - 200;
}

/* =========================
   GAME LOOP
========================= */
function loop(){
  ctx.clearRect(0,0,W,H);

  updateDogPhysics();
  updateCamera();

  drawBackground();
  drawDog();

  // hướng dẫn
  ctx.fillStyle="#7c2d12";
  ctx.font="18px Arial";
  ctx.fillText("SPACE / CLICK để nhảy",20,30);

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
